# VS839编译

## 一、编译

1. 解压`VS839_M1_release.rar`；
2. 在`VS839_M1_release/`目录下执行`./sdk_unpack.sh`；
3. 修改`customer-rel/board/package/mk/common.mk`中的编译器路径

```makefile
CROSS_COMPILE_ROOT_PATH	?= /hdd/System/VS819L/vs-linux/x86-arm/gcc-linaro-7.5.0-aarch64-linux-gnu
```

4. 拷贝内核`linux-5.4.94.tar.gz`到`customer-rel/board/package/opensource/kernel`并解压，
5. 重命名`linux-5.4.94`为`linux`并打补丁：

```sh
mv linux-5.4.94 linux
cd linux
patch -p1 < ../linux-5.4.94.patch
```

6. 切换到`customer-rel/board/package`目录下，执行`make all -j8`进行编译。

## 二、镜像打包

```
make_ext4fs -l 512M -s rootfs_ext4.simg strip_rootfs/
```